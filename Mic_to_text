import streamlit as st
import speech_recognition as sr
# éŸ³å£°å…¥åŠ›ï¼ˆèªè­˜ï¼‰é–¢æ•°
def speech_to_text():
    r = sr.Recognizer()
    with sr.Microphone() as source:
        audio = r.listen(source)
        try:
            return r.recognize_google(audio, language="ja-JP")
        except:
            return "" 
        
st.header("Mr.Yas Mic_to_text ğŸ¤—")        
image_placeholder = st.sidebar.empty()
already_displayed = False         
while True:
    if not already_displayed:
        print("è©±ã—ã‹ã‘ã¦ãã ã•ã„...")
        st.write("ğŸ¤—è©±ã—ã‹ã‘ã¦ãã ã•ã„...")
        already_displayed = True
    st.session_state.user_input = ""
    st.session_state.user_input = speech_to_text()
      
    # å¯¾è©±ãƒ«ãƒ¼ãƒ— 

    #ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®éŸ³å£°å…¥åŠ›ã‚’è¡¨ç¤º
    with st.chat_message('user'):   
        st.write(st.session_state.user_input) 
